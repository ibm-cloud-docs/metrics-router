---

copyright:
  years:  2022, 2024
lastupdated: "2024-06-12"

keywords:

subcollection: metrics-router

---

{{site.data.keyword.attribute-definition-list}}



# Platform metrics for {{site.data.keyword.metrics_router_full_notm}}
{: #monitoring_metrics}

You can use the {{site.data.keyword.mon_full}} service to monitor platform metrics that are exposed by {{site.data.keyword.metrics_router_full_notm}}. For example, you can use it to monitor how {{site.data.keyword.metrics_router_full_notm}} is routing metrics in each region where you operate.
{: shortdesc}

Platform metrics are metrics that are exposed by enabled-monitoring services and the platform in {{site.data.keyword.cloud_notm}}. You can use them to find and take action on configuration problems and possible outages.

{{site.data.keyword.mon_full_notm}} is a cloud-native, and container-intelligence management system that you can include as part of your {{site.data.keyword.cloud_notm}} architecture. You can use it to gain operational visibility into the performance and health of your applications, services, and platforms. It offers administrators, DevOps teams, and developers full stack telemetry with advanced features to monitor and troubleshoot, define alerts, and design custom dashboards. For more information, see [Getting started with {{site.data.keyword.mon_short}}](/docs/monitoring?topic=monitoring-getting-started).

## Collecting platform metrics
{: #monitoring_metrics_collect}

The {{site.data.keyword.metrics_router_full_notm}} generates metrics automatically in the {{site.data.keyword.cloud_notm}} account.

To collect platform metrics in an {{site.data.keyword.cloud_notm}} account, choose 1 of the following options:

- Configure the {{site.data.keyword.mon_short}} service in the {{site.data.keyword.cloud_notm}} account

    You can use {{site.data.keyword.mon_short}}, an IAM enabled service, to collect metrics through instances that you provision in each {{site.data.keyword.cloud_notm}} region where you operate and that you enable to collect platform metrics. For more information on how to enable platform metrics, select 1 of the following options:

    * [Using the UI](/docs/monitoring?topic=monitoring-platform_metrics_enabling#platform_metrics_enabling_ui)

    * [Using the CLI](/docs/monitoring?topic=monitoring-platform_metrics_enabling#platform_metrics_enabling_cli)

    You can configure 1 instance only of the {{site.data.keyword.mon_full_notm}} service per region to collect platform metrics in that location. For more information about supported locations, see [Locations supported by the {{site.data.keyword.mon_short}} service](/docs/monitoring?topic=monitoring-regions).

    In a region, before you configure a {{site.data.keyword.mon_short}} instance to collect platform metrics, check with the account or service administrator if another {{site.data.keyword.mon_short}} instance has already been configured. You may not have permissions to see all {{site.data.keyword.mon_short}} instances in the region.
    {: note}

- Configure {{site.data.keyword.metrics_router_full_notm}} in the {{site.data.keyword.cloud_notm}} account

    You can use {{site.data.keyword.metrics_router_full_notm}}, a platform service, to collect and route metrics at the account-level by configuring targets and routes that define where and how metrics are routed in the account. Supported targets are {{site.data.keyword.mon_short}} instances.

    {{site.data.keyword.metrics_router_full_notm}} routes metrics based on filtering conditions that are defined by 1 or more of the following values from the incoming service data. Presently, we allow the following operands: location, service name, service instance ID, resource type, and resource.

    You can define a target, the resource where metrics are routed to, in any {{site.data.keyword.metrics_router_full_notm}} supported region. However, the target resource can be located in any region where that type of target is supported, in the same account or in a different account. You can define rules to determine where metrics are to be routed by configuring 1 or more routes in the account. For more information about how to configure {{site.data.keyword.metrics_router_full_notm}}, see [Getting started with {{site.data.keyword.metrics_router_full_notm}}](/docs/metrics-router?topic=metrics-router-getting-started).

    {{site.data.keyword.metrics_router_full_notm}} can only route metrics that are generated in [supported regions](/docs/metrics-router?topic=metrics-router-regions). Other regions, where {{site.data.keyword.metrics_router_full_notm}} is not available, continue to collect and manage metrics by using the {{site.data.keyword.mon_short}} service.
    {: important}


You can collect metrics that are generated by {{site.data.keyword.metrics_router_full_notm}} by using any of the following methods:

* Configuring {{site.data.keyword.metrics_router_full_notm}}.

* Configuring the {{site.data.keyword.mon_short}} service.



## Locations of service metrics
{: #monitoring_metrics_locations}

{{site.data.keyword.metrics_router_full_notm}} automatically generates metrics in all of the [supported regions](/docs/metrics-router?topic=metrics-router-regions) so that you can track activity of the service in the account.

Automatic collection of {{site.data.keyword.metrics_router_full_notm}} service metrics is enabled in the following locations.

Americas locations
:   Dallas (`us-south`)

    Sao Paulo (`br-sao`)

    Toronto (`ca-tor`)

    Washington DC (`us-east`)

Asia Pacific locations
:   Osaka (`jp-osa`)

:   Sydney (`au-syd`)

:   Tokyo (`jp-tok`)

Europe locations
:   Frankfurt (`eu-de`)

    London (`eu-gb`)

    Madrid (`eu-es`)



## Monitoring {{site.data.keyword.metrics_router_full_notm}}
{: #monitoring_metrics_view}

You monitor the health and status of {{site.data.keyword.metrics_router_full_notm}} by monitoring metrics through the {{site.data.keyword.mon_short}} web UI.

- If you collect metrics through the {{site.data.keyword.mon_short}} service, you must launch the {{site.data.keyword.mon_short}} UI for the instance that is either enabled for platform metrics in the same region as your service instance or is configured as a Metrics Router target.

- If you collect and route metrics to 1 or more {{site.data.keyword.mon_short}} instances by configuring {{site.data.keyword.metrics_router_full_notm}} in the account, you must launch the {{site.data.keyword.mon_short}} UI for each instance that is configured and included in a routing rule.

In {{site.data.keyword.mon_short}}, use the *{{site.data.keyword.metrics_router_full_notm}} Overview* predefined dashboard template to monitor {{site.data.keyword.metrics_router_full_notm}} in {{site.data.keyword.cloud_notm}}.

To open the predefined {{site.data.keyword.metrics_router_full_notm}} template, complete the following steps from the {{site.data.keyword.mon_short}} UI:

1. In the {{site.data.keyword.mon_short}} UI, go to **Dashboards** &gt; **Dashboard templates** &gt; **IBM**.
2. Select **{{site.data.keyword.metrics_router_full_notm}} Overview**.

You cannot modify a dashboard template. However, you can copy the template and create a custom dashboard that you can then configure.
{: note}

Next, choose any of the following tasks to learn more about how to manage and work with platform metrics:

| Task | For more information |
|------|----------------------|
| Working with platform metrics | [link](/docs/monitoring?topic=monitoring-platform_metrics_working) |
| Controlling what data is visible | [link](/docs/monitoring?topic=monitoring-platform_metrics_working#global-attributes) |
| Monitoring metrics using dashboards | [link](/docs/monitoring?topic=monitoring-platform_metrics_working#platform_metrics_working_dash) |
| Configuring an alert for a platform metric | [link](/docs/monitoring?topic=monitoring-platform_metrics_working#platform_metrics_working_alert) |
| Controlling access by using teams | [link](/docs/monitoring?topic=monitoring-platform_metrics_working#platform_metrics_working_team) |
{: caption="Table 1. More information about {{site.data.keyword.mon_short}} tasks" caption-side="bottom"}

## Metrics
{: #monitoring_metrics_details}

{{site.data.keyword.metrics_router_full_notm}} exposes the following metrics to onboarded services:

- [Service's Successful timeseries](#ibm_metrics_router_for_services_sender_successful_timeseries)
- [Service's Failed timeseries](#ibm_metrics_router_for_services_sender_invalid_metadata)
- [Service's Timeseries Ingest Failure](#ibm_metrics_router_for_services_ingest_failed_timeseries)

### Total number of metrics successfully sent to the storage target
{: #ibm_metrics_router_for_services_sender_successful_timeseries}

Total number of timeseries that {{site.data.keyword.metrics_router_full_notm}} sent successfully to the destination target.

| Metadata         | Description |
|------------------|-------------|
| `Metric Name`    | `ibm_metrics_router_for_services_sender_successful_timeseries` |
| `Metric Type`    | `gauge` |
| `Value Type`     | `none` |
| `Segment By`     | `ibm_ctype`,`ibm_location`, `ibm_scope`, `ibm_service_name`, `ibm_resource_type`, `ibm_resource_name`, `ibm_resource`, `ibm_metrics_router_target_type`  |
| `Frequency`      | `60 seconds`  |
{: caption="Table 2. Total number of metrics successfully sent to the storage target" caption-side="top"}


### Total number of metrics that failed to send to the storage target
{: #ibm_metrics_router_for_services_sender_invalid_metadata}

Total number of timeseries that {{site.data.keyword.metrics_router_full_notm}} failed to send to the destination target.

There are 2 root causes for a failure:

- There is a problem with your target configuration.
- There is an upstream issue with the target storage destination.


| Metadata | Description |
|----------|-------------|
| `Metric Name` | `ibm_metrics_router_for_services_sender_invalid_metadata`|
| `Metric Type`    | `gauge` |
| `Value Type`     | `none` |
| `Segment By`     | `ibm_ctype`,`ibm_location`, `ibm_scope`, `ibm_service_name`, `ibm_resource_type`, `ibm_resource_name`, `ibm_resource`, `ibm_metrics_router_target_type`, `ibm_metrics_router_reason_code`   |
| `Frequency`      | `60 seconds`  |
{: caption="Table 3. Total number of metrics that failed to send to the storage target" caption-side="top"}

### Total number of complete metrics that failed to be ingested
{: #ibm_metrics_router_for_services_ingest_failed_timeseries}

Total number of complete timeseries that {{site.data.keyword.metrics_router_full_notm}} was not able to ingest as a result of metrics missing required labels.


| Metadata         | Description |
|------------------|-------------|
| `Metric Name`    | `ibm_metrics_router_for_services_ingest_failed_timeseries` |
| `Metric Type`    | `gauge` |
| `Value Type`     | `none` |
| `Segment By`     | `ibm_ctype`,`ibm_location`, `ibm_scope`, `ibm_service_name`, `ibm_metrics_router_reason_code`  |
| `Frequency`      | `60 seconds`  |
{: caption="Table 4. Total number of complete metrics that failed to be ingested" caption-side="top"}

### Global Attributes
{: #global-attributes}

The following attributes are available for all metrics.

| Attribute        | Attribute Name            | Attribute Description | Valid values |
|------------------|---------------------------|-----------------------|--------------|
| `Cloud Type`     | `ibm_ctype`               | The cloud type can be `public`, `dedicated`, or `local`.                               | Valid value is `public`.|
| `Location`       | `ibm_location`            | The location of the monitored resource, which can be a region, data center, or global. | [Valid regions](/docs/metrics-router?topic=metrics-router-regions). |
| `Resource`       | `ibm_resource`            | The resource that is measured by the service, which is typically an identifying name or GUID. | |
| `Resource Name`  | `ibm_resource_name`       | The name of the resource that is measured by the service. | |
| `Resource Type`  | `ibm_resource_type`       | The type of the resource that is measured by the service.                               | Valid value is `target`.|
| `Scope`          | `ibm_scope`               | The scope is the account where the metric is generated. | |
| `Service name`   | `ibm_service_name`        | The name of the service that is generating this metric.                                 | Valid value is `metrics-router`.|
{: caption="Table 5. Global attributes" caption-side="top"}

### More attributes
{: #additional-attributes}

The following attributes are available for one or more attributes described in the previous tables. See the individual metrics for options.

| Attribute        | Attribute Name            | Attribute Description  | Valid values |
|------------------|---------------------------|------------------------|--------------|
| `Target Type`    | `ibm_metrics_router_target_type` | The resource group where the service instance was created. | Valid value is `sysdig-monitor`.|
| `reason`      | `ibm_metrics_router_reason_code` | The reason for the failure of a timeseries delivery to its destination. | Valid values are: `invalid_metric_name`, `metrics_router_error`, `missing_required_label`. |
{: caption="Table 6. Other attributes" caption-side="top"}



## Dashboards templates
{: #dashboard_templates}

The following table lists the pre-defined dashboard templates that are available to monitor {{site.data.keyword.metrics_router_full_notm}}:

| Dashboard Name | Dashboard description |
|----------------|-----------------------|
| `Metrics Routing - Overview` | |
| `Metrics Routing - For Services Overview` |  |
{: caption="Table 7. Dashboard templates" caption-side="bottom"}
